<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dicky News Unlock | Auto Short</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
    <style>
        :root {
            --bg: #050505; --card: #121214; --yellow: #ffcc00;
            --yellow-glow: rgba(255, 204, 0, 0.4); --text: #e2e8f0;
        }
        * { box-sizing: border-box; cursor: none; }
        body {
            font-family: 'Segoe UI', sans-serif; background: var(--bg); color: var(--text);
            display: flex; align-items: center; justify-content: center; min-height: 100vh; margin: 0;
        }
        #cursor { width: 20px; height: 20px; background: var(--yellow); border-radius: 50%; position: fixed; pointer-events: none; z-index: 9999; mix-blend-mode: difference; }
        .box {
            max-width: 450px; width: 90%; background: var(--card); padding: 40px;
            border-radius: 24px; border: 1px solid #222; text-align: center;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        }
        h2 { background: linear-gradient(to bottom, #fff, var(--yellow)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-weight: 900; }
        input {
            width: 100%; padding: 15px; margin: 15px 0; border-radius: 12px;
            border: 1px solid #333; background: #0a0a0b; color: #fff;
        }
        button {
            width: 100%; padding: 16px; border: none; border-radius: 14px;
            font-weight: 800; cursor: none; transition: 0.3s;
        }
        .btn-primary { background: var(--yellow); color: #000; }
        .btn-task { background: #1e1e22; color: #fff; border: 1px solid #333; margin-bottom: 10px; }
        .btn-done { opacity: 0.4; background: #000 !important; }
        #result { margin-top: 20px; padding: 15px; border: 1px dashed #444; border-radius: 10px; display: none; }
    </style>
</head>
<body>

<div id="cursor"></div>
<div class="box" id="app" data-aos="zoom-in"></div>

<script src="https://unpkg.com/aos@next/dist/aos.js"></script>
<script>
const params = new URLSearchParams(window.location.search);
const app = document.getElementById("app");

// CONFIG SOSMED OTOMATIS
const mySocial = [
    { n: "Sub YouTube Utama", i: "fab fa-youtube", u: "https://youtube.com/@dickynews" },
    { n: "Sub YouTube Kedua", i: "fab fa-youtube", u: "https://youtube.com/@dickynewsofficial" },
    { n: "Like & Komen Video", i: "fas fa-heart", u: "https://youtu.be/pn-l2I36qEE" },
    { n: "Follow Instagram", i: "fab fa-instagram", u: "https://www.instagram.com/dickynews" },
    { n: "Follow TikTok", i: "fab fa-tiktok", u: "https://www.tiktok.com/@dickynewsyt_" },
    { n: "Follow Facebook", i: "fab fa-facebook", u: "https://www.facebook.com/dickynews45" }
];

AOS.init();
document.addEventListener('mousemove', e => {
    document.getElementById('cursor').style.left = e.clientX + 'px';
    document.getElementById('cursor').style.top = e.clientY + 'px';
});

// FUNGSI PENDORT OTOMATIS (MENGAMBIL 8 KARAKTER SAJA)
function shortIt(str) {
    return btoa(unescape(encodeURIComponent(str))).substring(0, 8);
}

// ================= MODE 1: GENERATOR =================
if(!params.get("v")){
    app.innerHTML = `
        <h2>Auto Short Link</h2>
        <input id="inp" placeholder="Tempel Link File Di Sini...">
        <button class="btn-primary" onclick="make()">BUAT LINK PENDEK</button>
        <div id="result"></div>
    `;

    window.make = function(){
        let val = document.getElementById("inp").value.trim();
        if(!val) return;
        let short = shortIt(val);
        // Simpan sementara di storage agar bisa diakses (simulasi database sederhana)
        localStorage.setItem('link_'+short, val);
        
        let final = window.location.origin + window.location.pathname + "?v=" + short;
        document.getElementById("result").style.display = "block";
        document.getElementById("result").innerHTML = `
            <p style="font-size:11px; color:var(--yellow)">Link Pendek Kamu:</p>
            <input readonly value="${final}" onclick="this.select();document.execCommand('copy');alert('Tersalin!')">
        `;
    };
}
// ================= MODE 2: UNLOCK =================
else {
    const key = params.get("v");
    const target = localStorage.getItem('link_'+key) || "https://google.com"; // Fallback jika tidak ketemu

    app.innerHTML = `<h3>Unlock Link (${key})</h3><div id="t"></div>`;
    let d = 0;
    mySocial.forEach(s => {
        let b = document.createElement("button");
        b.className = "btn-task";
        b.innerHTML = `<i class="${s.i}"></i> ${s.n}`;
        b.onclick = () => {
            window.open(s.u, "_blank");
            if(!b.classList.contains("btn-done")){
                b.classList.add("btn-done"); b.innerHTML = "âœ… Selesai"; d++;
                if(d >= mySocial.length) {
                    app.innerHTML += `<button class="btn-primary" style="margin-top:20px; background:#22c55e; color:#fff" onclick="window.location.href='${target}'">DOWNLOAD FILE</button>`;
                }
            }
        };
        document.getElementById("t").appendChild(b);
    });
}
</script>
</body>
</html>
